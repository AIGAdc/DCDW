<script>
  mapboxgl.accessToken = 'pk.eyJ1IjoicnZvbmRvaGxlbiIsImEiOiJ0WHFyM1hRIn0.YNQ1RlsmSD6hAbSqmif7FA';
  const map = new mapboxgl.Map({
    container: 'map',
    style: 'mapbox://styles/rvondohlen/cjmmf0bgc1o5x2rn45cpgdeux',
    center: [-77.027805, 38.904681],
    zoom: 9.4
  });

  map.on('click', function (e) {

    var features = map.queryRenderedFeatures(e.point, {
      layers: ['map-data-v4-9-30-6tu2z4'] // replace this with the name of the layer
    });

    if (!features.length) {
      return;
    }

    var feature = features[0];

    map.flyTo({
      center: feature.geometry.coordinates,
      speed: 0.125
    });

    var popup = new mapboxgl.Popup({
        offset: [0, -15]
      })
      .setLngLat(feature.geometry.coordinates)
      .setHTML('<h3>' + feature.properties.title + '</h3><p>' + feature.properties.date + ' &#64; ' + feature.properties
        .time + '<br/>' + feature.properties.location + '<br/>' + feature.properties.address + '</p><a href="' +
        feature.properties.link + '">Visit the event page</a>')
      .setLngLat(feature.geometry.coordinates)
      .addTo(map);
  });

  // Change the cursor to a pointer when the it enters a feature in the 'symbols' layer.
  map.on('mouseenter', 'map-data-v4-9-30-6tu2z4', function () {
    map.getCanvas().style.cursor = 'pointer';
  });

  // Change it back to a pointer when it leaves.
  map.on('mouseleave', 'map-data-v4-9-30-6tu2z4', function () {
    map.getCanvas().style.cursor = '';
  });
</script>